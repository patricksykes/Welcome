<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 High Performance Computing at UQ | Introduction to the Mathematical Marine Ecology (MME) Lab</title>
  <meta name="description" content="This is the primary information document for members of the MME Lab." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 High Performance Computing at UQ | Introduction to the Mathematical Marine Ecology (MME) Lab" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the primary information document for members of the MME Lab." />
  <meta name="github-repo" content="MathMarEcol/Welcome" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 High Performance Computing at UQ | Introduction to the Mathematical Marine Ecology (MME) Lab" />
  
  <meta name="twitter:description" content="This is the primary information document for members of the MME Lab." />
  

<meta name="author" content="The Mathematical Marine Ecology Lab Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="how-to-write-well.html"/>
<link rel="next" href="gcm.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#lab-meetings"><i class="fa fa-check"></i><b>1.1</b> Lab Meetings</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#general-administration"><i class="fa fa-check"></i><b>1.2</b> General Administration</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#lab-contact"><i class="fa fa-check"></i><b>1.2.1</b> Lab Contact:</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#comm"><i class="fa fa-check"></i><b>1.2.2</b> Lab Communication</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#school-of-maths-and-physics"><i class="fa fa-check"></i><b>1.2.3</b> School of Maths and Physics</a></li>
<li class="chapter" data-level="1.2.4" data-path="index.html"><a href="index.html#general-it-support"><i class="fa fa-check"></i><b>1.2.4</b> General IT Support</a></li>
<li class="chapter" data-level="1.2.5" data-path="index.html"><a href="index.html#student-support"><i class="fa fa-check"></i><b>1.2.5</b> Student Support</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#computing"><i class="fa fa-check"></i><b>1.3</b> Computing</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#research-data-manager"><i class="fa fa-check"></i><b>1.3.1</b> Research Data Manager</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#useful-tools"><i class="fa fa-check"></i><b>1.4</b> Useful Tools</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i><b>1.4.1</b> Software</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#r-resources"><i class="fa fa-check"></i><b>1.4.2</b> R Resources</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#r-packages"><i class="fa fa-check"></i><b>1.4.3</b> R Packages</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#un-sustainable-development-goals"><i class="fa fa-check"></i><b>1.5</b> UN Sustainable Development Goals</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#open-data-science"><i class="fa fa-check"></i><b>1.6</b> Open Data Science</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#online-code-of-conduct"><i class="fa fa-check"></i><b>1.7</b> Online Code of Conduct</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>2</b> R &amp; RStudio, RMarkdown</a><ul>
<li class="chapter" data-level="2.1" data-path="rstudio.html"><a href="rstudio.html#objectives-resources"><i class="fa fa-check"></i><b>2.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="2.1.1" data-path="rstudio.html"><a href="rstudio.html#objectives"><i class="fa fa-check"></i><b>2.1.1</b> Objectives</a></li>
<li class="chapter" data-level="2.1.2" data-path="rstudio.html"><a href="rstudio.html#resources"><i class="fa fa-check"></i><b>2.1.2</b> Resources</a></li>
<li class="chapter" data-level="2.1.3" data-path="rstudio.html"><a href="rstudio.html#data-and-packages"><i class="fa fa-check"></i><b>2.1.3</b> Data and packages</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="rstudio.html"><a href="rstudio.html#why-learn-r-with-rstudio"><i class="fa fa-check"></i><b>2.2</b> Why learn R with RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="rstudio.html"><a href="rstudio.html#r-at-the-console-rstudio-goodies"><i class="fa fa-check"></i><b>2.3</b> R at the console, RStudio goodies</a><ul>
<li class="chapter" data-level="2.3.1" data-path="rstudio.html"><a href="rstudio.html#error-messages-are-your-friends"><i class="fa fa-check"></i><b>2.3.1</b> Error messages are your friends</a></li>
<li class="chapter" data-level="2.3.2" data-path="rstudio.html"><a href="rstudio.html#logical-operators-and-expressions"><i class="fa fa-check"></i><b>2.3.2</b> Logical operators and expressions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="rstudio.html"><a href="rstudio.html#your-turn"><i class="fa fa-check"></i><b>2.4</b> Your Turn</a></li>
<li class="chapter" data-level="2.5" data-path="rstudio.html"><a href="rstudio.html#r-functions-help-pages"><i class="fa fa-check"></i><b>2.5</b> R functions, help pages</a><ul>
<li class="chapter" data-level="2.5.1" data-path="rstudio.html"><a href="rstudio.html#your-turn-1"><i class="fa fa-check"></i><b>2.5.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rstudio.html"><a href="rstudio.html#packages"><i class="fa fa-check"></i><b>2.6</b> Packages</a></li>
<li class="chapter" data-level="2.7" data-path="rstudio.html"><a href="rstudio.html#clearing-the-environment"><i class="fa fa-check"></i><b>2.7</b> Clearing the environment</a><ul>
<li class="chapter" data-level="2.7.1" data-path="rstudio.html"><a href="rstudio.html#your-turn-2"><i class="fa fa-check"></i><b>2.7.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="rstudio.html"><a href="rstudio.html#rmarkdown"><i class="fa fa-check"></i><b>2.8</b> RMarkdown</a><ul>
<li class="chapter" data-level="2.8.1" data-path="rstudio.html"><a href="rstudio.html#your-turn-3"><i class="fa fa-check"></i><b>2.8.1</b> Your Turn</a></li>
<li class="chapter" data-level="2.8.2" data-path="rstudio.html"><a href="rstudio.html#code-chunks"><i class="fa fa-check"></i><b>2.8.2</b> Code chunks</a></li>
<li class="chapter" data-level="2.8.3" data-path="rstudio.html"><a href="rstudio.html#your-turn-4"><i class="fa fa-check"></i><b>2.8.3</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="rstudio.html"><a href="rstudio.html#rmarkdown-video-1-minute"><i class="fa fa-check"></i><b>2.9</b> RMarkdown video (1-minute)</a></li>
<li class="chapter" data-level="2.10" data-path="rstudio.html"><a href="rstudio.html#troubleshooting"><i class="fa fa-check"></i><b>2.10</b> Troubleshooting</a><ul>
<li class="chapter" data-level="2.10.1" data-path="rstudio.html"><a href="rstudio.html#i-entered-a-command-and-nothings-happening"><i class="fa fa-check"></i><b>2.10.1</b> I entered a command and nothing’s happening</a></li>
<li class="chapter" data-level="2.10.2" data-path="rstudio.html"><a href="rstudio.html#how-do-i-update-rstudio"><i class="fa fa-check"></i><b>2.10.2</b> How do I update RStudio?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>3</b> Programming in R</a><ul>
<li class="chapter" data-level="3.1" data-path="programming.html"><a href="programming.html#objectives-resources-1"><i class="fa fa-check"></i><b>3.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="3.1.1" data-path="programming.html"><a href="programming.html#objectives-1"><i class="fa fa-check"></i><b>3.1.1</b> Objectives</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="programming.html"><a href="programming.html#analysis-plan"><i class="fa fa-check"></i><b>3.2</b> Analysis plan</a></li>
<li class="chapter" data-level="3.3" data-path="programming.html"><a href="programming.html#create-an-r-script"><i class="fa fa-check"></i><b>3.3</b> Create an R script</a></li>
<li class="chapter" data-level="3.4" data-path="programming.html"><a href="programming.html#automation-with-for-loops"><i class="fa fa-check"></i><b>3.4</b> Automation with for loops</a><ul>
<li class="chapter" data-level="3.4.1" data-path="programming.html"><a href="programming.html#thinking-ahead-cleaning-up-our-code"><i class="fa fa-check"></i><b>3.4.1</b> Thinking ahead: cleaning up our code</a></li>
<li class="chapter" data-level="3.4.2" data-path="programming.html"><a href="programming.html#for-loop-basic-structure"><i class="fa fa-check"></i><b>3.4.2</b> For loop basic structure</a></li>
<li class="chapter" data-level="3.4.3" data-path="programming.html"><a href="programming.html#executable-for-loop"><i class="fa fa-check"></i><b>3.4.3</b> Executable for loop!</a></li>
<li class="chapter" data-level="3.4.4" data-path="programming.html"><a href="programming.html#clean-up-our-repo"><i class="fa fa-check"></i><b>3.4.4</b> Clean up our repo</a></li>
<li class="chapter" data-level="3.4.5" data-path="programming.html"><a href="programming.html#your-turn-5"><i class="fa fa-check"></i><b>3.4.5</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="programming.html"><a href="programming.html#conditional-statements-with-if-and-else"><i class="fa fa-check"></i><b>3.5</b> Conditional statements with <code>if</code> and <code>else</code></a><ul>
<li class="chapter" data-level="3.5.1" data-path="programming.html"><a href="programming.html#if-statement-basic-structure"><i class="fa fa-check"></i><b>3.5.1</b> if statement basic structure</a></li>
<li class="chapter" data-level="3.5.2" data-path="programming.html"><a href="programming.html#executable-if-statement"><i class="fa fa-check"></i><b>3.5.2</b> Executable if statement</a></li>
<li class="chapter" data-level="3.5.3" data-path="programming.html"><a href="programming.html#executable-ifelse-statement"><i class="fa fa-check"></i><b>3.5.3</b> Executable if/else statement</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="programming.html"><a href="programming.html#more-r"><i class="fa fa-check"></i><b>3.6</b> More R!</a><ul>
<li class="chapter" data-level="3.6.1" data-path="programming.html"><a href="programming.html#importing-and-installing"><i class="fa fa-check"></i><b>3.6.1</b> Importing and Installing</a></li>
<li class="chapter" data-level="3.6.2" data-path="programming.html"><a href="programming.html#organization-and-workflows"><i class="fa fa-check"></i><b>3.6.2</b> Organization and workflows</a></li>
<li class="chapter" data-level="3.6.3" data-path="programming.html"><a href="programming.html#getting-help"><i class="fa fa-check"></i><b>3.6.3</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="programming.html"><a href="programming.html#ideas-for-extended-analysis-2"><i class="fa fa-check"></i><b>3.7</b> Ideas for Extended Analysis 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>4</b> GitHub</a><ul>
<li class="chapter" data-level="4.1" data-path="github.html"><a href="github.html#objectives-2"><i class="fa fa-check"></i><b>4.1</b> Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="github.html"><a href="github.html#what-are-git-and-github"><i class="fa fa-check"></i><b>4.2</b> What are Git and Github?</a></li>
<li class="chapter" data-level="4.3" data-path="github.html"><a href="github.html#why-should-scientists-use-github"><i class="fa fa-check"></i><b>4.3</b> Why should scientists use GitHub?</a></li>
<li class="chapter" data-level="4.4" data-path="github.html"><a href="github.html#resources-1"><i class="fa fa-check"></i><b>4.4</b> Resources</a></li>
<li class="chapter" data-level="4.5" data-path="github.html"><a href="github.html#lets-get-started"><i class="fa fa-check"></i><b>4.5</b> Let’s get started</a><ul>
<li class="chapter" data-level="4.5.1" data-path="github.html"><a href="github.html#some-github-terminology"><i class="fa fa-check"></i><b>4.5.1</b> Some Github terminology</a></li>
<li class="chapter" data-level="4.5.2" data-path="github.html"><a href="github.html#setup-git-github"><i class="fa fa-check"></i><b>4.5.2</b> Setup Git &amp; GitHub</a></li>
<li class="chapter" data-level="4.5.3" data-path="github.html"><a href="github.html#create-a-repository-on-github.com"><i class="fa fa-check"></i><b>4.5.3</b> Create a repository on Github.com</a></li>
<li class="chapter" data-level="4.5.4" data-path="github.html"><a href="github.html#clone-your-repository-using-rstudio"><i class="fa fa-check"></i><b>4.5.4</b> Clone your repository using RStudio</a></li>
<li class="chapter" data-level="4.5.5" data-path="github.html"><a href="github.html#inspect-results"><i class="fa fa-check"></i><b>4.5.5</b> Inspect results</a></li>
<li class="chapter" data-level="4.5.6" data-path="github.html"><a href="github.html#add-files-to-our-local-repo"><i class="fa fa-check"></i><b>4.5.6</b> Add files to our local repo</a></li>
<li class="chapter" data-level="4.5.7" data-path="github.html"><a href="github.html#committing-your-changes-and-syncing-with-github.com"><i class="fa fa-check"></i><b>4.5.7</b> Committing your changes and syncing with GitHub.com</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="github.html"><a href="github.html#explore-remote-github"><i class="fa fa-check"></i><b>4.6</b> Explore remote Github</a></li>
<li class="chapter" data-level="4.7" data-path="github.html"><a href="github.html#going-back-in-time"><i class="fa fa-check"></i><b>4.7</b> Going back in time</a></li>
<li class="chapter" data-level="4.8" data-path="github.html"><a href="github.html#happy-git-with-r"><i class="fa fa-check"></i><b>4.8</b> Happy Git with R</a></li>
<li class="chapter" data-level="4.9" data-path="github.html"><a href="github.html#growing-the-tree---branching-and-merging"><i class="fa fa-check"></i><b>4.9</b> Growing the Tree - Branching and merging</a><ul>
<li class="chapter" data-level="4.9.1" data-path="github.html"><a href="github.html#make-a-branch"><i class="fa fa-check"></i><b>4.9.1</b> Make a Branch</a></li>
<li class="chapter" data-level="4.9.2" data-path="github.html"><a href="github.html#use-a-branch"><i class="fa fa-check"></i><b>4.9.2</b> Use a branch</a></li>
<li class="chapter" data-level="4.9.3" data-path="github.html"><a href="github.html#put-changes-into-master"><i class="fa fa-check"></i><b>4.9.3</b> Put changes into master</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="collaborating.html"><a href="collaborating.html"><i class="fa fa-check"></i><b>5</b> Collaborating with GitHub</a><ul>
<li class="chapter" data-level="5.1" data-path="collaborating.html"><a href="collaborating.html#objectives-resources-2"><i class="fa fa-check"></i><b>5.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="5.1.1" data-path="collaborating.html"><a href="collaborating.html#objectives-3"><i class="fa fa-check"></i><b>5.1.1</b> Objectives</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="collaborating.html"><a href="collaborating.html#create-repo-partner-1"><i class="fa fa-check"></i><b>5.2</b> Create repo (Partner 1)</a></li>
<li class="chapter" data-level="5.3" data-path="collaborating.html"><a href="collaborating.html#create-a-gh-pages-branch-partner-1"><i class="fa fa-check"></i><b>5.3</b> Create a gh-pages branch (Partner 1)</a></li>
<li class="chapter" data-level="5.4" data-path="collaborating.html"><a href="collaborating.html#give-your-collaborator-administration-privileges-partner-1-and-2"><i class="fa fa-check"></i><b>5.4</b> Give your collaborator administration privileges (Partner 1 and 2)</a></li>
<li class="chapter" data-level="5.5" data-path="collaborating.html"><a href="collaborating.html#clone-to-a-new-rproject-partner-1"><i class="fa fa-check"></i><b>5.5</b> Clone to a new Rproject (Partner 1)</a></li>
<li class="chapter" data-level="5.6" data-path="collaborating.html"><a href="collaborating.html#clone-to-a-new-rproject-partner-2"><i class="fa fa-check"></i><b>5.6</b> Clone to a new Rproject (Partner 2)</a></li>
<li class="chapter" data-level="5.7" data-path="collaborating.html"><a href="collaborating.html#edit-a-file-and-sync-partner-2"><i class="fa fa-check"></i><b>5.7</b> Edit a file and sync (Partner 2)</a></li>
<li class="chapter" data-level="5.8" data-path="collaborating.html"><a href="collaborating.html#state-of-the-repository"><i class="fa fa-check"></i><b>5.8</b> State of the Repository</a></li>
<li class="chapter" data-level="5.9" data-path="collaborating.html"><a href="collaborating.html#merge-conflicts"><i class="fa fa-check"></i><b>5.9</b> Merge conflicts</a><ul>
<li class="chapter" data-level="5.9.1" data-path="collaborating.html"><a href="collaborating.html#your-turn-6"><i class="fa fa-check"></i><b>5.9.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="collaborating.html"><a href="collaborating.html#how-do-you-avoid-merge-conflicts"><i class="fa fa-check"></i><b>5.10</b> How do you avoid merge conflicts?</a></li>
<li class="chapter" data-level="5.11" data-path="collaborating.html"><a href="collaborating.html#create-your-collaborative-website"><i class="fa fa-check"></i><b>5.11</b> Create your collaborative website</a></li>
<li class="chapter" data-level="5.12" data-path="collaborating.html"><a href="collaborating.html#your-turn-7"><i class="fa fa-check"></i><b>5.12</b> Your turn</a></li>
<li class="chapter" data-level="5.13" data-path="collaborating.html"><a href="collaborating.html#explore-on-github.com"><i class="fa fa-check"></i><b>5.13</b> Explore on GitHub.com</a><ul>
<li class="chapter" data-level="5.13.1" data-path="collaborating.html"><a href="collaborating.html#commit-history"><i class="fa fa-check"></i><b>5.13.1</b> Commit History</a></li>
<li class="chapter" data-level="5.13.2" data-path="collaborating.html"><a href="collaborating.html#blame"><i class="fa fa-check"></i><b>5.13.2</b> Blame</a></li>
<li class="chapter" data-level="5.13.3" data-path="collaborating.html"><a href="collaborating.html#issues"><i class="fa fa-check"></i><b>5.13.3</b> Issues</a></li>
</ul></li>
<li class="chapter" data-level="5.14" data-path="collaborating.html"><a href="collaborating.html#nyc-flights-exploration"><i class="fa fa-check"></i><b>5.14</b> NYC flights exploration</a><ul>
<li class="chapter" data-level="5.14.1" data-path="collaborating.html"><a href="collaborating.html#logical-operators"><i class="fa fa-check"></i><b>5.14.1</b> Logical operators</a></li>
</ul></li>
<li class="chapter" data-level="5.15" data-path="collaborating.html"><a href="collaborating.html#your-turn-8"><i class="fa fa-check"></i><b>5.15</b> Your turn</a><ul>
<li class="chapter" data-level="5.15.1" data-path="collaborating.html"><a href="collaborating.html#use-logicals"><i class="fa fa-check"></i><b>5.15.1</b> Use logicals</a></li>
<li class="chapter" data-level="5.15.2" data-path="collaborating.html"><a href="collaborating.html#missing-values"><i class="fa fa-check"></i><b>5.15.2</b> Missing values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="how-to-write-well.html"><a href="how-to-write-well.html"><i class="fa fa-check"></i><b>6</b> How to write well</a><ul>
<li class="chapter" data-level="6.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="6.1.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#what-is-good-scientific-writing"><i class="fa fa-check"></i><b>6.1.1</b> What is good scientific writing?</a></li>
<li class="chapter" data-level="6.1.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#why-write-well"><i class="fa fa-check"></i><b>6.1.2</b> Why write well?</a></li>
<li class="chapter" data-level="6.1.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#why-do-we-have-difficulties-writing-well"><i class="fa fa-check"></i><b>6.1.3</b> Why do we have difficulties writing well?</a></li>
<li class="chapter" data-level="6.1.4" data-path="how-to-write-well.html"><a href="how-to-write-well.html#how-this-e-book-can-help"><i class="fa fa-check"></i><b>6.1.4</b> How this e-book can help</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#general-scientific-style"><i class="fa fa-check"></i><b>6.2</b> General scientific style</a><ul>
<li class="chapter" data-level="6.2.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#remove-emotive-language"><i class="fa fa-check"></i><b>6.2.1</b> Remove emotive language</a></li>
<li class="chapter" data-level="6.2.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#be-consistent"><i class="fa fa-check"></i><b>6.2.2</b> Be consistent</a></li>
<li class="chapter" data-level="6.2.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#be-particular"><i class="fa fa-check"></i><b>6.2.3</b> Be particular!</a></li>
<li class="chapter" data-level="6.2.4" data-path="how-to-write-well.html"><a href="how-to-write-well.html#repetition-is-good"><i class="fa fa-check"></i><b>6.2.4</b> Repetition is good!</a></li>
<li class="chapter" data-level="6.2.5" data-path="how-to-write-well.html"><a href="how-to-write-well.html#elegant-variation-confuses"><i class="fa fa-check"></i><b>6.2.5</b> Elegant variation confuses…</a></li>
<li class="chapter" data-level="6.2.6" data-path="how-to-write-well.html"><a href="how-to-write-well.html#making-word-structure-parallel"><i class="fa fa-check"></i><b>6.2.6</b> Making word structure parallel…</a></li>
<li class="chapter" data-level="6.2.7" data-path="how-to-write-well.html"><a href="how-to-write-well.html#be-specific"><i class="fa fa-check"></i><b>6.2.7</b> Be specific</a></li>
<li class="chapter" data-level="6.2.8" data-path="how-to-write-well.html"><a href="how-to-write-well.html#be-formal-not-colloquial"><i class="fa fa-check"></i><b>6.2.8</b> Be formal, not colloquial</a></li>
<li class="chapter" data-level="6.2.9" data-path="how-to-write-well.html"><a href="how-to-write-well.html#typeset-equations-properly"><i class="fa fa-check"></i><b>6.2.9</b> Typeset equations properly</a></li>
<li class="chapter" data-level="6.2.10" data-path="how-to-write-well.html"><a href="how-to-write-well.html#make-your-writing-more-accessible-minimise-acronyms"><i class="fa fa-check"></i><b>6.2.10</b> Make your writing more accessible: minimise acronyms</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#simple-words"><i class="fa fa-check"></i><b>6.3</b> Simple words</a><ul>
<li class="chapter" data-level="6.3.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#replace-complex-with-simpler-words"><i class="fa fa-check"></i><b>6.3.1</b> Replace complex with simpler words</a></li>
<li class="chapter" data-level="6.3.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#simpler-word-groups-unstacking-modifiers"><i class="fa fa-check"></i><b>6.3.2</b> Simpler word groups: unstacking modifiers</a></li>
<li class="chapter" data-level="6.3.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#redundant-word-pairs"><i class="fa fa-check"></i><b>6.3.3</b> Redundant word pairs</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="how-to-write-well.html"><a href="how-to-write-well.html#appropriate-words"><i class="fa fa-check"></i><b>6.4</b> Appropriate words</a><ul>
<li class="chapter" data-level="6.4.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#appropriate-adjectives"><i class="fa fa-check"></i><b>6.4.1</b> Appropriate adjectives</a></li>
<li class="chapter" data-level="6.4.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#appropriate-prepositions"><i class="fa fa-check"></i><b>6.4.2</b> Appropriate prepositions</a></li>
<li class="chapter" data-level="6.4.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#appropriate-word-partners"><i class="fa fa-check"></i><b>6.4.3</b> Appropriate word partners</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="how-to-write-well.html"><a href="how-to-write-well.html#overused-words"><i class="fa fa-check"></i><b>6.5</b> Overused words</a><ul>
<li class="chapter" data-level="6.5.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#occur"><i class="fa fa-check"></i><b>6.5.1</b> Occur</a></li>
<li class="chapter" data-level="6.5.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#importantcrucialcritical"><i class="fa fa-check"></i><b>6.5.2</b> Important/crucial/critical</a></li>
<li class="chapter" data-level="6.5.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#respectively"><i class="fa fa-check"></i><b>6.5.3</b> Respectively</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="how-to-write-well.html"><a href="how-to-write-well.html#confusing-word-pairs"><i class="fa fa-check"></i><b>6.6</b> Confusing word pairs</a><ul>
<li class="chapter" data-level="6.6.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#a-rather-than-an"><i class="fa fa-check"></i><b>6.6.1</b> ‘A’ rather than ‘an’</a></li>
<li class="chapter" data-level="6.6.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#an-rather-than-a"><i class="fa fa-check"></i><b>6.6.2</b> ‘An’ rather than ‘a’</a></li>
<li class="chapter" data-level="6.6.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#aims-vs-objectives"><i class="fa fa-check"></i><b>6.6.3</b> ‘Aims’ vs ‘objectives’</a></li>
<li class="chapter" data-level="6.6.4" data-path="how-to-write-well.html"><a href="how-to-write-well.html#all-together-vs-altogether"><i class="fa fa-check"></i><b>6.6.4</b> ‘All together’ vs ‘Altogether’</a></li>
<li class="chapter" data-level="6.6.5" data-path="how-to-write-well.html"><a href="how-to-write-well.html#examples-of-altogether"><i class="fa fa-check"></i><b>6.6.5</b> Examples of ‘altogether’</a></li>
<li class="chapter" data-level="6.6.6" data-path="how-to-write-well.html"><a href="how-to-write-well.html#examples-of-all-together"><i class="fa fa-check"></i><b>6.6.6</b> Examples of ‘all together’</a></li>
<li class="chapter" data-level="6.6.7" data-path="how-to-write-well.html"><a href="how-to-write-well.html#between-vs-among"><i class="fa fa-check"></i><b>6.6.7</b> ‘Between’ vs ‘Among’</a></li>
<li class="chapter" data-level="6.6.8" data-path="how-to-write-well.html"><a href="how-to-write-well.html#complement-vs-compliment"><i class="fa fa-check"></i><b>6.6.8</b> ‘Complement’ vs ‘Compliment’</a></li>
<li class="chapter" data-level="6.6.9" data-path="how-to-write-well.html"><a href="how-to-write-well.html#dependent-vs-dependant"><i class="fa fa-check"></i><b>6.6.9</b> ‘Dependent’ vs ‘Dependant’</a></li>
<li class="chapter" data-level="6.6.10" data-path="how-to-write-well.html"><a href="how-to-write-well.html#effect-vs-affect"><i class="fa fa-check"></i><b>6.6.10</b> ‘Effect’ vs ‘Affect’</a></li>
<li class="chapter" data-level="6.6.11" data-path="how-to-write-well.html"><a href="how-to-write-well.html#either-or-vs-neither-nor"><i class="fa fa-check"></i><b>6.6.11</b> ‘Either or’ vs ‘Neither nor’</a></li>
<li class="chapter" data-level="6.6.12" data-path="how-to-write-well.html"><a href="how-to-write-well.html#estimated-vs-measured-vs-quantified-vs-determined-vs-assessed"><i class="fa fa-check"></i><b>6.6.12</b> ‘Estimated’ vs ‘Measured’ vs ‘Quantified’ vs ‘Determined’ vs ‘Assessed’</a></li>
<li class="chapter" data-level="6.6.13" data-path="how-to-write-well.html"><a href="how-to-write-well.html#measured"><i class="fa fa-check"></i><b>6.6.13</b> Measured</a></li>
<li class="chapter" data-level="6.6.14" data-path="how-to-write-well.html"><a href="how-to-write-well.html#estimated"><i class="fa fa-check"></i><b>6.6.14</b> Estimated</a></li>
<li class="chapter" data-level="6.6.15" data-path="how-to-write-well.html"><a href="how-to-write-well.html#assessed"><i class="fa fa-check"></i><b>6.6.15</b> Assessed</a></li>
<li class="chapter" data-level="6.6.16" data-path="how-to-write-well.html"><a href="how-to-write-well.html#quantified"><i class="fa fa-check"></i><b>6.6.16</b> Quantified</a></li>
<li class="chapter" data-level="6.6.17" data-path="how-to-write-well.html"><a href="how-to-write-well.html#determined"><i class="fa fa-check"></i><b>6.6.17</b> Determined</a></li>
<li class="chapter" data-level="6.6.18" data-path="how-to-write-well.html"><a href="how-to-write-well.html#led-vs-lead"><i class="fa fa-check"></i><b>6.6.18</b> ‘Led’ vs ‘Lead’</a></li>
<li class="chapter" data-level="6.6.19" data-path="how-to-write-well.html"><a href="how-to-write-well.html#lesser-vs-fewer"><i class="fa fa-check"></i><b>6.6.19</b> ‘Lesser’ vs ‘Fewer’</a></li>
<li class="chapter" data-level="6.6.20" data-path="how-to-write-well.html"><a href="how-to-write-well.html#maybe-vs-may-be"><i class="fa fa-check"></i><b>6.6.20</b> ‘Maybe’ vs ‘May be’</a></li>
<li class="chapter" data-level="6.6.21" data-path="how-to-write-well.html"><a href="how-to-write-well.html#may-vs-might-vs-could"><i class="fa fa-check"></i><b>6.6.21</b> ‘May’ vs ‘Might’ vs ‘Could’</a></li>
<li class="chapter" data-level="6.6.22" data-path="how-to-write-well.html"><a href="how-to-write-well.html#past-vs-last"><i class="fa fa-check"></i><b>6.6.22</b> ‘Past’ vs ‘Last’</a></li>
<li class="chapter" data-level="6.6.23" data-path="how-to-write-well.html"><a href="how-to-write-well.html#practice-vs-practise"><i class="fa fa-check"></i><b>6.6.23</b> ‘Practice’ vs ‘Practise’</a></li>
<li class="chapter" data-level="6.6.24" data-path="how-to-write-well.html"><a href="how-to-write-well.html#predominate-vs-predominant"><i class="fa fa-check"></i><b>6.6.24</b> Predominate vs Predominant</a></li>
<li class="chapter" data-level="6.6.25" data-path="how-to-write-well.html"><a href="how-to-write-well.html#principle-vs-principal"><i class="fa fa-check"></i><b>6.6.25</b> ‘Principle’ vs ‘Principal’</a></li>
<li class="chapter" data-level="6.6.26" data-path="how-to-write-well.html"><a href="how-to-write-well.html#should-vs-could"><i class="fa fa-check"></i><b>6.6.26</b> Should vs Could</a></li>
<li class="chapter" data-level="6.6.27" data-path="how-to-write-well.html"><a href="how-to-write-well.html#toward-vs-towards"><i class="fa fa-check"></i><b>6.6.27</b> ‘Toward’ vs ‘Towards’</a></li>
<li class="chapter" data-level="6.6.28" data-path="how-to-write-well.html"><a href="how-to-write-well.html#where-vs-when"><i class="fa fa-check"></i><b>6.6.28</b> ‘Where’ vs ‘When’</a></li>
<li class="chapter" data-level="6.6.29" data-path="how-to-write-well.html"><a href="how-to-write-well.html#which-vs-that"><i class="fa fa-check"></i><b>6.6.29</b> ‘Which’ vs ‘That’</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="how-to-write-well.html"><a href="how-to-write-well.html#punctuation"><i class="fa fa-check"></i><b>6.7</b> Punctuation</a><ul>
<li class="chapter" data-level="6.7.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#apostrophes"><i class="fa fa-check"></i><b>6.7.1</b> Apostrophes</a></li>
<li class="chapter" data-level="6.7.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#recommendations"><i class="fa fa-check"></i><b>6.7.2</b> Recommendations</a></li>
<li class="chapter" data-level="6.7.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#commas"><i class="fa fa-check"></i><b>6.7.3</b> Commas</a></li>
<li class="chapter" data-level="6.7.4" data-path="how-to-write-well.html"><a href="how-to-write-well.html#spaces"><i class="fa fa-check"></i><b>6.7.4</b> Spaces</a></li>
<li class="chapter" data-level="6.7.5" data-path="how-to-write-well.html"><a href="how-to-write-well.html#hyphens"><i class="fa fa-check"></i><b>6.7.5</b> Hyphens</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="how-to-write-well.html"><a href="how-to-write-well.html#short-and-simple-sentences"><i class="fa fa-check"></i><b>6.8</b> Short and simple sentences</a><ul>
<li class="chapter" data-level="6.8.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#can-you-say-something-more-simply-make-explicit-statements"><i class="fa fa-check"></i><b>6.8.1</b> Can you say something more simply? Make explicit statements</a></li>
<li class="chapter" data-level="6.8.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#uncertainties-only-one-in-a-sentence"><i class="fa fa-check"></i><b>6.8.2</b> Uncertainties – only one in a sentence</a></li>
<li class="chapter" data-level="6.8.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#removing-redundancy-in-sentences"><i class="fa fa-check"></i><b>6.8.3</b> Removing redundancy in sentences</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="how-to-write-well.html"><a href="how-to-write-well.html#effective-sentences"><i class="fa fa-check"></i><b>6.9</b> Effective sentences</a><ul>
<li class="chapter" data-level="6.9.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#agreement-of-subject-and-verb"><i class="fa fa-check"></i><b>6.9.1</b> Agreement of subject and verb</a></li>
<li class="chapter" data-level="6.9.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#putting-like-things-together"><i class="fa fa-check"></i><b>6.9.2</b> Putting like things together</a></li>
<li class="chapter" data-level="6.9.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#active-vs-passive-voice"><i class="fa fa-check"></i><b>6.9.3</b> Active vs Passive voice</a></li>
<li class="chapter" data-level="6.9.4" data-path="how-to-write-well.html"><a href="how-to-write-well.html#logical-sequence"><i class="fa fa-check"></i><b>6.9.4</b> Logical sequence</a></li>
<li class="chapter" data-level="6.9.5" data-path="how-to-write-well.html"><a href="how-to-write-well.html#numbers-in-sentences"><i class="fa fa-check"></i><b>6.9.5</b> Numbers in sentences</a></li>
<li class="chapter" data-level="6.9.6" data-path="how-to-write-well.html"><a href="how-to-write-well.html#one-idea-per-sentence"><i class="fa fa-check"></i><b>6.9.6</b> One idea per sentence</a></li>
<li class="chapter" data-level="6.9.7" data-path="how-to-write-well.html"><a href="how-to-write-well.html#lists-in-a-sentence"><i class="fa fa-check"></i><b>6.9.7</b> Lists in a sentence</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="how-to-write-well.html"><a href="how-to-write-well.html#effective-paragraphs"><i class="fa fa-check"></i><b>6.10</b> Effective paragraphs</a><ul>
<li class="chapter" data-level="6.10.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#structure"><i class="fa fa-check"></i><b>6.10.1</b> Structure</a></li>
<li class="chapter" data-level="6.10.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#lists"><i class="fa fa-check"></i><b>6.10.2</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="6.11" data-path="how-to-write-well.html"><a href="how-to-write-well.html#common-grammatical-mistakes"><i class="fa fa-check"></i><b>6.11</b> Common grammatical mistakes</a><ul>
<li class="chapter" data-level="6.11.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#remove-double-negatives"><i class="fa fa-check"></i><b>6.11.1</b> Remove double negatives</a></li>
<li class="chapter" data-level="6.11.2" data-path="how-to-write-well.html"><a href="how-to-write-well.html#plurals"><i class="fa fa-check"></i><b>6.11.2</b> Plurals</a></li>
<li class="chapter" data-level="6.11.3" data-path="how-to-write-well.html"><a href="how-to-write-well.html#split-infinitives"><i class="fa fa-check"></i><b>6.11.3</b> Split infinitives</a></li>
<li class="chapter" data-level="6.11.4" data-path="how-to-write-well.html"><a href="how-to-write-well.html#however"><i class="fa fa-check"></i><b>6.11.4</b> However</a></li>
<li class="chapter" data-level="6.11.5" data-path="how-to-write-well.html"><a href="how-to-write-well.html#mainly"><i class="fa fa-check"></i><b>6.11.5</b> Mainly</a></li>
<li class="chapter" data-level="6.11.6" data-path="how-to-write-well.html"><a href="how-to-write-well.html#using-reword-from-the-journal-conservation-biology."><i class="fa fa-check"></i><b>6.11.6</b> Using (reword, from the journal Conservation Biology.)</a></li>
<li class="chapter" data-level="6.11.7" data-path="how-to-write-well.html"><a href="how-to-write-well.html#myself-is-not-a-substitute-for-me-reword"><i class="fa fa-check"></i><b>6.11.7</b> Myself is not a substitute for me (Reword)</a></li>
<li class="chapter" data-level="6.11.8" data-path="how-to-write-well.html"><a href="how-to-write-well.html#references-and-further-reading"><i class="fa fa-check"></i><b>6.11.8</b> References and further reading</a></li>
</ul></li>
<li class="chapter" data-level="6.12" data-path="how-to-write-well.html"><a href="how-to-write-well.html#american-english-differences"><i class="fa fa-check"></i><b>6.12</b> American English Differences</a><ul>
<li class="chapter" data-level="6.12.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#british-or-us-english"><i class="fa fa-check"></i><b>6.12.1</b> British or US English</a></li>
</ul></li>
<li class="chapter" data-level="6.13" data-path="how-to-write-well.html"><a href="how-to-write-well.html#removing-waste-words"><i class="fa fa-check"></i><b>6.13</b> Removing waste words</a><ul>
<li class="chapter" data-level="6.13.1" data-path="how-to-write-well.html"><a href="how-to-write-well.html#removing-removing-redundant-words"><i class="fa fa-check"></i><b>6.13.1</b> Removing Removing redundant words</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html"><i class="fa fa-check"></i><b>7</b> High Performance Computing at UQ</a><ul>
<li class="chapter" data-level="7.1" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#uqs-research-computing-centre"><i class="fa fa-check"></i><b>7.1</b> UQ’s Research Computing Centre</a><ul>
<li class="chapter" data-level="7.1.1" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#hpc-access"><i class="fa fa-check"></i><b>7.1.1</b> HPC access</a></li>
<li class="chapter" data-level="7.1.2" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#logging-in"><i class="fa fa-check"></i><b>7.1.2</b> Logging in</a></li>
<li class="chapter" data-level="7.1.3" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#submitting-a-job"><i class="fa fa-check"></i><b>7.1.3</b> Submitting a Job</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#smp-high-performance-computing"><i class="fa fa-check"></i><b>7.2</b> SMP High Performance Computing</a><ul>
<li class="chapter" data-level="7.2.1" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#getafix-structure"><i class="fa fa-check"></i><b>7.2.1</b> Getafix Structure</a></li>
<li class="chapter" data-level="7.2.2" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#slurm"><i class="fa fa-check"></i><b>7.2.2</b> SLURM</a></li>
<li class="chapter" data-level="7.2.3" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#other-resources"><i class="fa fa-check"></i><b>7.2.3</b> Other Resources</a></li>
<li class="chapter" data-level="7.2.4" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#getting-into-getafix"><i class="fa fa-check"></i><b>7.2.4</b> Getting into Getafix</a></li>
<li class="chapter" data-level="7.2.5" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#putting-your-data-on-getafix"><i class="fa fa-check"></i><b>7.2.5</b> Putting your data on Getafix</a></li>
<li class="chapter" data-level="7.2.6" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#sending-your-data-to-getafix"><i class="fa fa-check"></i><b>7.2.6</b> Sending your data to getafix</a></li>
<li class="chapter" data-level="7.2.7" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#running-jobs-on-getafix"><i class="fa fa-check"></i><b>7.2.7</b> Running jobs on Getafix</a></li>
<li class="chapter" data-level="7.2.8" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#debugging-rmd-files"><i class="fa fa-check"></i><b>7.2.8</b> Debugging Rmd files</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#general-hpc-guidance"><i class="fa fa-check"></i><b>7.3</b> General HPC Guidance</a><ul>
<li class="chapter" data-level="7.3.1" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#getting-results-back"><i class="fa fa-check"></i><b>7.3.1</b> Getting Results back</a></li>
<li class="chapter" data-level="7.3.2" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#data.frames"><i class="fa fa-check"></i><b>7.3.2</b> Data.frames</a></li>
<li class="chapter" data-level="7.3.3" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#plots"><i class="fa fa-check"></i><b>7.3.3</b> Plots</a></li>
<li class="chapter" data-level="7.3.4" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#playing-nice"><i class="fa fa-check"></i><b>7.3.4</b> Playing nice</a></li>
<li class="chapter" data-level="7.3.5" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#job-submission-tips"><i class="fa fa-check"></i><b>7.3.5</b> Job Submission Tips</a></li>
<li class="chapter" data-level="7.3.6" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#what-hpc-should-i-use"><i class="fa fa-check"></i><b>7.3.6</b> What HPC should I use?</a></li>
<li class="chapter" data-level="7.3.7" data-path="high-performance-computing-at-uq.html"><a href="high-performance-computing-at-uq.html#parallel-coding-in-r"><i class="fa fa-check"></i><b>7.3.7</b> Parallel coding in R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="gcm.html"><a href="gcm.html"><i class="fa fa-check"></i><b>8</b> Using Global Climate Models</a><ul>
<li class="chapter" data-level="8.1" data-path="gcm.html"><a href="gcm.html#overview"><i class="fa fa-check"></i><b>8.1</b> Overview</a></li>
<li class="chapter" data-level="8.2" data-path="gcm.html"><a href="gcm.html#variable-choice"><i class="fa fa-check"></i><b>8.2</b> Variable Choice</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="cdo.html"><a href="cdo.html"><i class="fa fa-check"></i><b>9</b> CMIP6 Models and CDO</a><ul>
<li class="chapter" data-level="9.1" data-path="cdo.html"><a href="cdo.html#cmip6-models-what-the-f-is-that"><i class="fa fa-check"></i><b>9.1</b> CMIP6 models? What the F*** is that?</a><ul>
<li class="chapter" data-level="9.1.1" data-path="cdo.html"><a href="cdo.html#most-common-climate-scenarios"><i class="fa fa-check"></i><b>9.1.1</b> Most common climate scenarios</a></li>
<li class="chapter" data-level="9.1.2" data-path="cdo.html"><a href="cdo.html#can-i-use-those-models"><i class="fa fa-check"></i><b>9.1.2</b> Can I use those models?</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="cdo.html"><a href="cdo.html#variable-choice-1"><i class="fa fa-check"></i><b>9.2</b> Variable Choice</a><ul>
<li class="chapter" data-level="9.2.1" data-path="cdo.html"><a href="cdo.html#lets-play-with-filters"><i class="fa fa-check"></i><b>9.2.1</b> Let’s play with filters</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="cdo.html"><a href="cdo.html#working-with-cmip6-netcdf-files-using-cdo-climate-data-operators"><i class="fa fa-check"></i><b>9.3</b> Working with CMIP6 netCDF files using CDO (Climate data operators)</a><ul>
<li class="chapter" data-level="9.3.1" data-path="cdo.html"><a href="cdo.html#installation-process"><i class="fa fa-check"></i><b>9.3.1</b> Installation Process</a></li>
<li class="chapter" data-level="9.3.2" data-path="cdo.html"><a href="cdo.html#ncview-a-netcdf-visual-browser"><i class="fa fa-check"></i><b>9.3.2</b> Ncview: a netCDF visual browser</a></li>
<li class="chapter" data-level="9.3.3" data-path="cdo.html"><a href="cdo.html#working-with-cdo-and-ncview"><i class="fa fa-check"></i><b>9.3.3</b> Working with CDO and ncview</a></li>
<li class="chapter" data-level="9.3.4" data-path="cdo.html"><a href="cdo.html#files-in-directory"><i class="fa fa-check"></i><b>9.3.4</b> Files in directory</a></li>
<li class="chapter" data-level="9.3.5" data-path="cdo.html"><a href="cdo.html#regridding-with-cdo"><i class="fa fa-check"></i><b>9.3.5</b> Regridding with CDO</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="cdo.html"><a href="cdo.html#cdo-with-multiple-input-modelsfiles"><i class="fa fa-check"></i><b>9.4</b> CDO with multiple input models/files</a></li>
<li class="chapter" data-level="9.5" data-path="cdo.html"><a href="cdo.html#cdo-extra-functions"><i class="fa fa-check"></i><b>9.5</b> CDO extra functions</a></li>
<li class="chapter" data-level="9.6" data-path="cdo.html"><a href="cdo.html#running-cdo-in-the-cluster-awoongaflashlite"><i class="fa fa-check"></i><b>9.6</b> Running CDO in the cluster (awoonga/flashlite)</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to the Mathematical Marine Ecology (MME) Lab</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="high-performance-computing-at-uq" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> High Performance Computing at UQ</h1>
<div id="uqs-research-computing-centre" class="section level2">
<h2><span class="header-section-number">7.1</span> UQ’s Research Computing Centre</h2>
<p>The Research Computing Centre (RCC) provides coordinated management and support of The University of Queensland’s sustained and substantial investment in eResearch. The RCC helps UQ researchers across disciplines make the most of the University’s eResearch technologies, such as High Performance Computing (HPC), data storage, data management, visualisation, workflow and videoconferencing.</p>
<p>Specifically for the MME, the RCC coordinates access and support for 3 HPCs and the Research Data Manager (RDM).</p>
<div id="hpc-access" class="section level3">
<h3><span class="header-section-number">7.1.1</span> HPC access</h3>
<p>Go to <a href="https://www.qriscloud.org.au/" class="uri">https://www.qriscloud.org.au/</a> and register for an account. Try to log in with your staff account, which may require logging out of any UQ websites. This step is automated, and you will be granted access immediately.</p>
<p>You must apply separately for each HPC server you want to access, providing a “technical justification”. You apply at <a href="https://www.qriscloud.org.au/" class="uri">https://www.qriscloud.org.au/</a>.</p>
<p>Tinaroo does not appear on the QRIScompute request page, go <a href="https://services.qriscloud.org.au/services/request/new/151270360cb54d0783bffd482b4651d2">here</a>.</p>
<p>The 3 HPCs under the RCC banner are:</p>
<p><strong>FlashLite</strong></p>
<p>The technical justification for FlashLite is:</p>
<ol style="list-style-type: decimal">
<li>You need to read and write vast amounts of data, such as CMIP6 data.</li>
<li>You keep running out of memory on Tinaroo or Awoonga</li>
<li>David Abramson has asked us to demonstrate the BeeGFS filesystem caching enhancements</li>
</ol>
<p>An example submission made by Phil Dyer. Access was approved very quickly.</p>
<blockquote>
<p>MathMarEcol Bioregionalisation on FlashLite</p>
<p>My lab is working on large scale marine ecology and climate models. The input data is around 30-50TB. David Abramson has asked us to use FlashLite to demostrate the BeeGFS filesystem caching enhancements, which is only available on FlashLite.</p>
</blockquote>
<p><strong>Tinaroo</strong></p>
<p>The technical justification for Tinaroo is:</p>
<ol style="list-style-type: decimal">
<li>Your code runs faster when you can use more nodes (MPI)</li>
<li>Need a GUI, such as with MATLAB</li>
</ol>
<p>Using more nodes means your code runs across more than one computer. If you are just using multiple cores within your computer, then Awoonga is a better choice.</p>
<p><strong>Awoonga</strong></p>
<p>The technical justification for Awoonga is:</p>
<ol style="list-style-type: decimal">
<li>Your code is written to use multiple cores within your computer</li>
<li>You are doing embarrassingly parallel work or parameter sweeps, where each run is independent</li>
</ol>
<p>The Zooplankton size spectrum modelling is embarrassingly parallel, because each grid cell can ignore surrounding grid cells. Computing GCMs would not be embarrassingly parallel, because you need to know the neighbouring grid cells to decide your next state, at every time step..</p>
<p>An example submission made by Phil Dyer, approved within 5 minutes.</p>
<blockquote>
<p>MathMarEcol bioregionalisation</p>
<p>My code currently works in a shared memory mode within a single node. Most of the computations are embarrassingly parallel. I run parameter sweeps across different datasets as well, which can be run independently on separate nodes. I can make use of 20-40+ cores, and typically need about 5 to 10 GB per core within a run.</p>
</blockquote>
<div id="network-access" class="section level4">
<h4><span class="header-section-number">7.1.1.1</span> Network Access</h4>
<p>You must be on the UQ intranet to access the servers. If you are connected to eduroam/uq cable/uq wifi, then you are already in the intranet.</p>
<p>Everywhere else you will need to install the UQ VPN software and log in. Follow the instructions at:</p>
<p><a href="https://my.uq.edu.au/information-and-services/information-technology/working-remotely/vpn-virtual-private-network" class="uri">https://my.uq.edu.au/information-and-services/information-technology/working-remotely/vpn-virtual-private-network</a></p>
</div>
<div id="the-terminal" class="section level4">
<h4><span class="header-section-number">7.1.1.2</span> The terminal</h4>
<p>To access any of the HPC’s, you will need a terminal program on your computer.</p>
<p>On mac, this is Terminal.</p>
<p>On windows, this is Command Prompt or Windows Powershell (not Windows Powershell ISE). If you don’t have an up to date Windows 10 machine, install <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/">PuTTy</a>.</p>
<p>Some people like the Ubuntu app in windows 10, just remember the <em>mnt/c</em> syntax to get to the files on your computer.</p>
</div>
</div>
<div id="logging-in" class="section level3">
<h3><span class="header-section-number">7.1.2</span> Logging in</h3>
<p>Once you have your terminal open</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="fu">ssh</span> <span class="op">&lt;</span>hpc cluster login alias<span class="op">&gt;</span></a></code></pre></div>
<p>Your username and password are the same as your UQ login.</p>
<table>
<thead>
<tr class="header">
<th>Cluster</th>
<th>Login Nodes</th>
<th>Cluster Login Alias</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Awoonga</td>
<td>awoonga1.rcc.uq.edu.au</td>
<td>awoonga.rcc.uq.edu.au</td>
</tr>
<tr class="even">
<td>FlashLite</td>
<td>flashlite1.rcc.uq.edu.au</td>
<td>flashlite.rcc.uq.edu.au</td>
</tr>
<tr class="odd">
<td></td>
<td>flashlite2.rcc.uq.edu.au</td>
<td></td>
</tr>
<tr class="even">
<td>Tinaroo</td>
<td>tinaroo1.rcc.uq.edu.au</td>
<td>tinaroo.rcc.uq.edu.au</td>
</tr>
<tr class="odd">
<td></td>
<td>tinaroo2.rcc.uq.edu.au</td>
<td></td>
</tr>
<tr class="even">
<td>Wiener</td>
<td>wiener.hpc.dc.uq.edu.au</td>
<td>wiener.hpc.dc.uq.edu.au</td>
</tr>
</tbody>
</table>
</div>
<div id="submitting-a-job" class="section level3">
<h3><span class="header-section-number">7.1.3</span> Submitting a Job</h3>
<p>Add section on submitted a job via PBS to Awoonga/Flashlite</p>
<p>For the moment, you can get more information <a href="http://www2.rcc.uq.edu.au/hpc/guides/index.html?default.html">here</a>. NOTE: You need to VPN in if not on campus.</p>
</div>
</div>
<div id="smp-high-performance-computing" class="section level2">
<h2><span class="header-section-number">7.2</span> SMP High Performance Computing</h2>
<p><a href="http://research.smp.uq.edu.au/computing/getafix.html" class="uri">http://research.smp.uq.edu.au/computing/getafix.html</a></p>
<p>The School of Mathematics and Physics have their own HPC called Getafix. Getafix is a cluster and will assign your job to nodes using the SLURM program.</p>
<div id="getafix-structure" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Getafix Structure</h3>
<p>Each computer in the cluster is called a node. Each node has it’s own cpu’s, memory and graphics card. Nodes all share a common network drive, so all your data is available on all the nodes. Most nodes in Getafix have about 24 cores, a few have more and a few have less. Each node also typically has about 250GB of memory.</p>
<p>One node is special, the login node. The login node works like any remote computer, you can run jobs on the login node, but out of respect for other users, you should only do setup operations and short tests on the login node.</p>
</div>
<div id="slurm" class="section level3">
<h3><span class="header-section-number">7.2.2</span> SLURM</h3>
<p>SLURM is the program that balances all the jobs between users across the cluster. You specify what you want the cluster to do, and how much time, nodes, cpu’s and memory you think you will need. SLURM then waits until the cluster has enough resources available to run your job and starts the job. If you try to use more resources than you asked for, your job will be killed. If you ask for lots of resources, it might take a while for enough nodes to be available, since smaller jobs will usually fill up the available resources as other jobs end.</p>
</div>
<div id="other-resources" class="section level3">
<h3><span class="header-section-number">7.2.3</span> Other Resources</h3>
<p>The cluster has access to shared resources, particularly shared storage and networking, so your data is available on all the nodes at the same location.</p>
</div>
<div id="getting-into-getafix" class="section level3">
<h3><span class="header-section-number">7.2.4</span> Getting into Getafix</h3>
<div id="request-access" class="section level4">
<h4><span class="header-section-number">7.2.4.1</span> Request Access</h4>
<p>Email ITS at <a href="mailto:help@its.uq.edu.au" class="email">help@its.uq.edu.au</a> and request access to the SMP cluster which is called Getafix.</p>
<p>This can take a few days. Make sure you explain your connection to the School of Maths and Physics. For HDR students, you will often have both a staff and student account. Let ITS know which one you want to use to log in with.</p>
</div>
<div id="logging-into-getafix" class="section level4">
<h4><span class="header-section-number">7.2.4.2</span> Logging into Getafix</h4>
<p>Once you have your terminal open and logged into the UQ VPN (if off campus), type:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="fu">ssh</span>  <span class="op">&lt;</span>username<span class="op">&gt;</span>@getafix.smp.uq.edu.au</a></code></pre></div>
<p>Where <code>&lt;username&gt;</code> is your staff or student login.</p>
<p>If a popup appears saying <code>&quot;Authenticity can't be established&quot;</code>. Say yes.</p>
<p>Enter your password.</p>
<p>If you see:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="op">&gt;</span> <span class="ex">ssh</span>: Could not resolve hostname getafix.smp.uq.edu.au: This is usually </a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="op">&gt;</span> <span class="ex">a</span> temporary error during hostname resolution and means that the local</a>
<a class="sourceLine" id="cb109-3" data-line-number="3"><span class="op">&gt;</span> <span class="ex">server</span> did not receive a response from an authoritative server.</a></code></pre></div>
<p>Then you either typed it incorrectly or are not on the UQ internal network, see <em>Network Access</em>.</p>
<p>If you really want R X11 plots to appear on your desktop, add <code>-X</code> to the login. This works on Mac and Linux. Windows may need an X11 server, which you can most easily get from the Ubuntu app. I strongly recommend
saving plots into files and copying them to your computer, X11 can be very slow to render.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="fu">ssh</span> -X <span class="op">&lt;</span>username<span class="op">&gt;</span>@getafix.smp.uq.edu.au</a></code></pre></div>
</div>
<div id="advanced" class="section level4">
<h4><span class="header-section-number">7.2.4.3</span> Advanced</h4>
<ol style="list-style-type: decimal">
<li><p>SSH config file</p>
<p><code>\~/.ssh/config</code>:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="ex">Host</span> my-getafix</a>
<a class="sourceLine" id="cb111-2" data-line-number="2">  <span class="ex">ForwardX11Trusted</span> yes <span class="co">#equivalent to adding -X</span></a>
<a class="sourceLine" id="cb111-3" data-line-number="3">  <span class="ex">User</span> uqpdyer</a>
<a class="sourceLine" id="cb111-4" data-line-number="4">  <span class="ex">HostName</span> 130.102.3.59</a></code></pre></div>
<p>Now, you only have to type</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="fu">ssh</span> my-getafix</a></code></pre></div></li>
</ol>
</div>
</div>
<div id="putting-your-data-on-getafix" class="section level3">
<h3><span class="header-section-number">7.2.5</span> Putting your data on Getafix</h3>
<p>You need to have your data on Getafix. Where to put it?</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1">ls <span class="op">/</span></a></code></pre></div>
<div id="home" class="section level4">
<h4><span class="header-section-number">7.2.5.1</span> Home</h4>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="op">/</span>home<span class="op">/</span>username<span class="op">/</span></a></code></pre></div>
<p>Which is often shortened to</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="op">~</span><span class="er">/</span></a></code></pre></div>
<p>You have 40GB of data allowed in here. The home directory is often used for programs and configuration files. R libraries will install here by default, which is fine. Don’t use the home directory for data sets, results and plots.</p>
</div>
<div id="data" class="section level4">
<h4><span class="header-section-number">7.2.5.2</span> Data</h4>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="op">/</span>data<span class="op">/</span>username<span class="op">/</span></a></code></pre></div>
<p>You have 400GB of data allowed in here. Put your data sets and scripts in the <code>/data/username/</code> directory.</p>
</div>
<div id="data1-data2-data6" class="section level4">
<h4><span class="header-section-number">7.2.5.3</span> Data1, Data2 … Data6</h4>
<p>Most of the time you use <code>/data/</code> but there are other data folders that
you can access on request.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="op">/</span>data1<span class="op">/</span>username<span class="op">/</span></a>
<a class="sourceLine" id="cb117-2" data-line-number="2"><span class="er">/</span>data2<span class="op">/</span>username<span class="op">/</span></a></code></pre></div>
<p><code>data1</code> and <code>data2</code> are older system drives that we are not using.</p>
<p><code>data3</code> to <code>data6</code> are high speed access drives for very large file
reading and writing. These could be useful for work on GCM’s.</p>
</div>
</div>
<div id="sending-your-data-to-getafix" class="section level3">
<h3><span class="header-section-number">7.2.6</span> Sending your data to getafix</h3>
<div id="scp" class="section level4">
<h4><span class="header-section-number">7.2.6.1</span> scp</h4>
<p>scp is copy over ssh, it should work anywhere ssh works.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="fu">scp</span> -r  local_folder <span class="op">&lt;</span>username<span class="op">&gt;</span>@getafix.smp.uq.edu.au:/data/<span class="op">&lt;</span>username<span class="op">&gt;</span>/<span class="op">&lt;</span>folder<span class="op">&gt;</span></a></code></pre></div>
</div>
<div id="winscp" class="section level4">
<h4><span class="header-section-number">7.2.6.2</span> WinSCP</h4>
<p>A graphical interface for scp.</p>
</div>
<div id="rsync" class="section level4">
<h4><span class="header-section-number">7.2.6.3</span> rsync</h4>
<p>Rsync is smarter than scp, it only copies changes, so it can be faster
than scp.</p>
<p>usually installed on Linux, may not be available on Mac or Windows.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="fu">rsync</span>  local_folder <span class="op">&lt;</span>username<span class="op">&gt;</span>@getafix.smp.uq.edu.au:/data/<span class="op">&lt;</span>username<span class="op">&gt;</span>/<span class="op">&lt;</span>folder<span class="op">&gt;</span></a></code></pre></div>
</div>
</div>
<div id="running-jobs-on-getafix" class="section level3">
<h3><span class="header-section-number">7.2.7</span> Running jobs on Getafix</h3>
<div id="modules" class="section level4">
<h4><span class="header-section-number">7.2.7.1</span> Modules</h4>
<p>To allow different versions of software to be used by different users (like python 3.4 versus python 3.6), Getafix uses Linux modules. On Getafix, R is in a module, and won’t work until you load the module. You
can use the default version of a module, or specify a particular version of a module if your job depends on it.</p>
<p>To see what modules are available, type:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="ex">module</span> avail</a></code></pre></div>
<p>When you see a module you want to use, load it with:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb121-1" data-line-number="1"><span class="ex">module</span> load <span class="op">&lt;</span>module name<span class="op">&gt;</span></a></code></pre></div>
<p>I use the following modules:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="ex">module</span> load R</a>
<a class="sourceLine" id="cb122-2" data-line-number="2"><span class="ex">module</span> load pandoc <span class="co">#rendering rmarkdown into html and pdf</span></a>
<a class="sourceLine" id="cb122-3" data-line-number="3"><span class="ex">module</span> load gdal <span class="co">#spatial packages like sf</span></a>
<a class="sourceLine" id="cb122-4" data-line-number="4"><span class="ex">module</span> load geos <span class="co">#spatial packages like sf</span></a>
<a class="sourceLine" id="cb122-5" data-line-number="5"><span class="ex">module</span> load proj <span class="co">#spatial packages like sf</span></a></code></pre></div>
</div>
<div id="r-on-getafix" class="section level4">
<h4><span class="header-section-number">7.2.7.2</span> R on Getafix</h4>
<p>R on Getafix is pretty similar to R on your local computer, without RStudio.</p>
</div>
<div id="installing-packages" class="section level4">
<h4><span class="header-section-number">7.2.7.3</span> Installing packages</h4>
<p>Install packages to a local library in your home directory.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb123-1" data-line-number="1"><span class="ex">module</span> load R</a>
<a class="sourceLine" id="cb123-2" data-line-number="2"><span class="ex">R</span></a></code></pre></div>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;foreach&quot;</span>)</a>
<a class="sourceLine" id="cb124-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">&quot;doParallel&quot;</span>)</a>
<a class="sourceLine" id="cb124-3" data-line-number="3"><span class="kw">install.packages</span>(<span class="st">&quot;sf&quot;</span>)</a></code></pre></div>
<p>Accept the default library location unless you have a reason not to.</p>
<p>If your package fails to install, check if there is a system package missing.</p>
<p>For example, to install <code>sf</code>, you need to load more modules:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="ex">module</span> load R</a>
<a class="sourceLine" id="cb125-2" data-line-number="2"><span class="ex">module</span> load gdal</a>
<a class="sourceLine" id="cb125-3" data-line-number="3"><span class="ex">module</span> load geos</a>
<a class="sourceLine" id="cb125-4" data-line-number="4"><span class="ex">module</span> load proj</a>
<a class="sourceLine" id="cb125-5" data-line-number="5"><span class="ex">R</span></a></code></pre></div>
<p>Now <code>sf</code> should install.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;sf&quot;</span>)</a></code></pre></div>
<p>If it still does not work, send an email to <a href="mailto:help@its.uq.edu.au" class="email">help@its.uq.edu.au</a>, they have been helpful setting me up when something was missing or broken.</p>
</div>
<div id="parameters-for-rmd-files" class="section level4">
<h4><span class="header-section-number">7.2.7.4</span> Parameters for Rmd files</h4>
<p>You can pass parameters into Rmd files from the command line. You need to set up the `params` in the YAML header, see
<a href="https://bookdown.org/yihui/rmarkdown/parameterized-reports.html" class="uri">https://bookdown.org/yihui/rmarkdown/parameterized-reports.html</a></p>
<p>Using Rscript, you can render a report using a specified set of parameters like this:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="va">paramlist=</span><span class="st">&#39;list(nCores =24, gRange = 1:300 )&#39;</span></a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="ex">Rscript</span> -e <span class="st">&#39;knitr::opts_knit$set(progress = TRUE, verbose = TRUE); rmarkdown::render(&quot;/data/uqpdyer/demo.Rmd&quot;, params = &#39;&quot;</span><span class="va">${paramlist}</span><span class="st">&quot;&#39;, output_format = &quot;html_notebook&quot;, output_file = &quot;outfile.html&quot;, output_dir = &quot;/data/uqpdyer&quot;, envir = new.env())&#39;</span></a></code></pre></div>
<p>This is not as convenient as setting parameters in RStudio or within an R session. You have to be very careful about quotes, and the command line is hard to edit.</p>
<p>Sending parameters to an R script in bulk is much easier, but lacks the reproducability of Rmd.</p>
<div id="parameters-for-script-files" class="section level5">
<h5><span class="header-section-number">7.2.7.4.1</span> Parameters for script files</h5>
<p>Use the base <code>commandArgs</code> or the <code>optparse</code> package to use command line parameters in your script files</p>
<p>Then you can run the script from the command line like this:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="ex">Rscript</span> script.R input1 input2</a></code></pre></div>
</div>
</div>
<div id="slurm-1" class="section level4">
<h4><span class="header-section-number">7.2.7.5</span> SLURM</h4>
<p>So far, R has been running on the login node. Some things are easiest to do on the login node, like installing packages and transferring files. Computationally heavy tasks should be done on other nodes. To use the other nodes, you submit jobs with SLURM.</p>
<p>SLURM is a job scheduler. People request jobs by specifying the resources they need and the scripts to run, and SLURM queues the jobs until some nodes are available to run the job. You can also request an
interactive session, but it is more efficient to set up jobs and come back to get the results.</p>
<div id="sbatch" class="section level5">
<h5><span class="header-section-number">7.2.7.5.1</span> <code>sbatch</code></h5>
<p>The command <code>sbatch</code> is used to submit jobs, which are run when the resources become available.</p>
<p>You use SLURM by calling <code>sbatch</code>:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb129-1" data-line-number="1"><span class="ex">sbatch</span> script.sh</a></code></pre></div>
<p>where <code>script.sh</code> looks like</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb130-2" data-line-number="2"><span class="co">#SBATCH --ntasks=1</span></a>
<a class="sourceLine" id="cb130-3" data-line-number="3"><span class="co">#SBATCH --cpus-per-task=1</span></a>
<a class="sourceLine" id="cb130-4" data-line-number="4"><span class="co">#SBATCH --mem-per-cpu=1G</span></a>
<a class="sourceLine" id="cb130-5" data-line-number="5"><span class="co">#SBATCH --time=0-00:10</span></a>
<a class="sourceLine" id="cb130-6" data-line-number="6"></a>
<a class="sourceLine" id="cb130-7" data-line-number="7"><span class="bu">echo</span> <span class="st">&quot;hello world&quot;</span></a></code></pre></div>
<p>The <code>#SBATCH</code> lines at the top are parameters for the sbatch command, you can also include them in the command call:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="ex">sbatch</span> script.sh --ntasks=1 --cpus-per-task=1 --mem-per-cpu=1G --time=0-00:10 script.sh</a></code></pre></div>
<p>Then <code>script.sh</code> can simplify down to:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb132-2" data-line-number="2"></a>
<a class="sourceLine" id="cb132-3" data-line-number="3"><span class="bu">echo</span> <span class="st">&quot;hello world&quot;</span></a></code></pre></div>
<p>When working with R, we run scripts or arbitrary code snippets with Rscript, but the <code>sbatch</code> command still expects Rscript to be wrapped in <code>script_for_r.sh</code></p>
<pre class="shell"><code>#!/bin/bash
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=20
#SBATCH --mem-per-cpu=2G
#SBATCH --time=0-01:00

module load R
Rscript myRscript.R</code></pre>
<p>So running <code>sbatch</code> looks the same:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="ex">sbatch</span> script_for_r.sh</a></code></pre></div>
<p>Here is a meaningful r script we can test out. Note that I have specified 20 cpu’s in both <code>script_for_r.sh</code> and <code>myRscript.R</code></p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="kw">library</span>(foreach)</a>
<a class="sourceLine" id="cb135-2" data-line-number="2"><span class="kw">library</span>(doParallel)</a>
<a class="sourceLine" id="cb135-3" data-line-number="3"></a>
<a class="sourceLine" id="cb135-4" data-line-number="4">cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb135-5" data-line-number="5"><span class="kw">registerDoParallel</span>(cl)</a>
<a class="sourceLine" id="cb135-6" data-line-number="6">x &lt;-<span class="st"> </span>iris[<span class="kw">which</span>(iris[,<span class="dv">5</span>] <span class="op">!=</span><span class="st"> &quot;setosa&quot;</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>)]</a>
<a class="sourceLine" id="cb135-7" data-line-number="7">trials &lt;-<span class="st"> </span><span class="dv">10000</span></a>
<a class="sourceLine" id="cb135-8" data-line-number="8"></a>
<a class="sourceLine" id="cb135-9" data-line-number="9">ptime &lt;-<span class="st"> </span><span class="kw">system.time</span>({</a>
<a class="sourceLine" id="cb135-10" data-line-number="10">  r &lt;-<span class="st"> </span><span class="er">~</span>foreach<span class="op">~</span>(<span class="kw">icount</span>(trials), <span class="dt">.combine=</span>cbind) <span class="op">%dopar%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb135-11" data-line-number="11">    ind &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">100</span>, <span class="dv">100</span>, <span class="dt">replace=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb135-12" data-line-number="12">    result1 &lt;-<span class="st"> </span><span class="kw">glm</span>(x[ind,<span class="dv">2</span>]<span class="op">~</span>x[ind,<span class="dv">1</span>], <span class="dt">family=</span><span class="kw">binomial</span>(logit))</a>
<a class="sourceLine" id="cb135-13" data-line-number="13">    <span class="kw">coefficients</span>(result1)</a>
<a class="sourceLine" id="cb135-14" data-line-number="14">  }</a>
<a class="sourceLine" id="cb135-15" data-line-number="15">})[<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb135-16" data-line-number="16">ptime</a>
<a class="sourceLine" id="cb135-17" data-line-number="17"></a>
<a class="sourceLine" id="cb135-18" data-line-number="18"></a>
<a class="sourceLine" id="cb135-19" data-line-number="19">stime &lt;-<span class="st"> </span><span class="kw">system.time</span>({</a>
<a class="sourceLine" id="cb135-20" data-line-number="20">  r &lt;-<span class="st"> </span><span class="er">~</span>foreach<span class="op">~</span>(<span class="kw">icount</span>(trials), <span class="dt">.combine=</span>cbind) <span class="op">%do%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb135-21" data-line-number="21">    ind &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">100</span>, <span class="dv">100</span>, <span class="dt">replace=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb135-22" data-line-number="22">    result1 &lt;-<span class="st"> </span><span class="kw">glm</span>(x[ind,<span class="dv">2</span>]<span class="op">~</span>x[ind,<span class="dv">1</span>], <span class="dt">family=</span><span class="kw">binomial</span>(logit))</a>
<a class="sourceLine" id="cb135-23" data-line-number="23">    <span class="kw">coefficients</span>(result1)</a>
<a class="sourceLine" id="cb135-24" data-line-number="24">  }</a>
<a class="sourceLine" id="cb135-25" data-line-number="25">})[<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb135-26" data-line-number="26">stime</a>
<a class="sourceLine" id="cb135-27" data-line-number="27"></a>
<a class="sourceLine" id="cb135-28" data-line-number="28"><span class="kw">stopCluster</span>(cl)</a>
<a class="sourceLine" id="cb135-29" data-line-number="29"></a>
<a class="sourceLine" id="cb135-30" data-line-number="30">cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">20</span>)</a>
<a class="sourceLine" id="cb135-31" data-line-number="31"><span class="kw">registerDoParallel</span>(cl)</a>
<a class="sourceLine" id="cb135-32" data-line-number="32">ptime &lt;-<span class="st"> </span><span class="kw">system.time</span>({</a>
<a class="sourceLine" id="cb135-33" data-line-number="33">  r &lt;-<span class="st"> </span><span class="er">~</span>foreach<span class="op">~</span>(<span class="kw">icount</span>(trials), <span class="dt">.combine=</span>cbind) <span class="op">%dopar%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb135-34" data-line-number="34">    ind &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">100</span>, <span class="dv">100</span>, <span class="dt">replace=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb135-35" data-line-number="35">    result1 &lt;-<span class="st"> </span><span class="kw">glm</span>(x[ind,<span class="dv">2</span>]<span class="op">~</span>x[ind,<span class="dv">1</span>], <span class="dt">family=</span><span class="kw">binomial</span>(logit))</a>
<a class="sourceLine" id="cb135-36" data-line-number="36">    <span class="kw">coefficients</span>(result1)</a>
<a class="sourceLine" id="cb135-37" data-line-number="37">  }</a>
<a class="sourceLine" id="cb135-38" data-line-number="38">})[<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb135-39" data-line-number="39">ptime</a></code></pre></div>
</div>
<div id="salloc-and-srun" class="section level5">
<h5><span class="header-section-number">7.2.7.5.2</span> <code>salloc</code> and <code>srun</code></h5>
<p>If you really need to run something interactively, such as a Matlab GUI, make sure you log in with <code>-X</code> or <code>-Y</code> and then call:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode 1"><code class="sourceCode mandoc"><a class="sourceLine" id="cb136-1" data-line-number="1">salloc --ntasks=1 --cpus-per-task=1 --mem-per-cpu=1G --time=0-00:10</a>
<a class="sourceLine" id="cb136-2" data-line-number="2">srun --pty -x11 matlab</a></code></pre></div>
</div>
<div id="many-nodes" class="section level5">
<h5><span class="header-section-number">7.2.7.5.3</span> Many nodes</h5>
<p>So far, we have used only 1 node. The memory and cpu’s are all in the same node, and R behaves in exactly the same way as on your machine, only with more cores. You are clearly limited to a speed up of around 20 times with a single node.</p>
<p>To go beyond the single node limit, you have a few options.</p>
<ol style="list-style-type: decimal">
<li>Divide your job up</li>
</ol>
<ul>
<li>If you can break your job up into many independent runs, then you can submit a job for each run, and collect all the different outputs after all the jobs have run.</li>
<li>I have done this to test out the effects of changing combinations of parameters.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Rslurm</li>
</ol>
<ul>
<li>The Rslurm package will generate a set of scripts that submit a collection of jobs. Rslurm does the work of dividing up your job for you.</li>
<li>Take care with this package, the default settings will allocate far too many jobs and overwhelm Getafix.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>MPI</li>
</ol>
<ul>
<li>Message Passing Interface (MPI) is a library that shares information across nodes.</li>
<li>MPI requires extra setup in your code, and you need to use <code>mpirun</code> or <code>srun</code> inside the sbatch script</li>
</ul>
<div class="sourceCode" id="cb137"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb137-1" data-line-number="1">    <span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb137-2" data-line-number="2">    <span class="co">#SBATCH --ntasks=1</span></a>
<a class="sourceLine" id="cb137-3" data-line-number="3">    <span class="co">#SBATCH --cpus-per-task=1</span></a>
<a class="sourceLine" id="cb137-4" data-line-number="4">    <span class="co">#SBATCH --mem-per-cpu=1G</span></a>
<a class="sourceLine" id="cb137-5" data-line-number="5">    <span class="co">#SBATCH --time=0-00:10</span></a>
<a class="sourceLine" id="cb137-6" data-line-number="6"></a>
<a class="sourceLine" id="cb137-7" data-line-number="7">    <span class="ex">mpirun</span> echo <span class="st">&quot;running with MPI&quot;</span></a>
<a class="sourceLine" id="cb137-8" data-line-number="8">    <span class="ex">srun</span> echo <span class="st">&quot;run with SRUN&quot;</span></a></code></pre></div>
<p>doMPI and Rmpi are packages for working with MPI in R.</p>
<p>TODO: I have not figured out MPI on the cluster yet, it didn’t “just work”</p>
<ol start="4" style="list-style-type: decimal">
<li>future.batchTools</li>
</ol>
<ul>
<li>The future.batchtools package lets you submit SLURM jobs from R. The benefit of using future.batchtools is that you write R code using future syntax, then specify a SLURM plan, and all futures at a level specified by the plan are sent off as jobs. The script waits until the job finishes.</li>
<li>I recommend running a single node task with 1 cpu and a modest amount of ram, but a long running time, then all the heavy lifting is done by new jobs submitted by your script.</li>
<li>Take care with this package, I haven’t checked the defaults, but it might request too many resources like Rslurm.</li>
</ul>
</div>
<div id="r-with-parameters" class="section level5">
<h5><span class="header-section-number">7.2.7.5.4</span> R with parameters</h5>
<p>Being able to pass in parameters is useful for dividing your job up.</p>
<p>Some examples of sbatch scripts that use R parameters</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2"><span class="co">#SBATCH --ntasks=1</span></a>
<a class="sourceLine" id="cb138-3" data-line-number="3"><span class="co">#SBATCH --cpus-per-task=24</span></a>
<a class="sourceLine" id="cb138-4" data-line-number="4"><span class="co">#SBATCH --mem-per-cpu=7G</span></a>
<a class="sourceLine" id="cb138-5" data-line-number="5"><span class="co">#SBATCH --time=1-22:00</span></a>
<a class="sourceLine" id="cb138-6" data-line-number="6"><span class="ex">module</span> load R</a>
<a class="sourceLine" id="cb138-7" data-line-number="7"><span class="ex">Rscript</span> script.R <span class="va">$1</span> <span class="va">$2</span></a></code></pre></div>
<div class="sourceCode" id="cb139"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb139-1" data-line-number="1">    <span class="ex">sbatch</span> run_script.sh input1 input2</a>
<a class="sourceLine" id="cb139-2" data-line-number="2">    <span class="ex">sbatch</span> run_script.sh input1 input3</a></code></pre></div>
<p><code>$1</code> becomes the first argument, <code>input1</code> both times, and <code>$2</code> becomes
the second argument, <code>input2</code> in the first run and <code>input3</code> in the
second line.</p>
<p>Rendering an Rmd file with parameters:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="co">#SBATCH --ntasks=1</span></a>
<a class="sourceLine" id="cb140-3" data-line-number="3"><span class="co">#SBATCH --cpus-per-task=24</span></a>
<a class="sourceLine" id="cb140-4" data-line-number="4"><span class="co">#SBATCH --mem-per-cpu=7G</span></a>
<a class="sourceLine" id="cb140-5" data-line-number="5"><span class="co">#SBATCH --time=1-22:00</span></a>
<a class="sourceLine" id="cb140-6" data-line-number="6"><span class="ex">module</span> load R</a>
<a class="sourceLine" id="cb140-7" data-line-number="7"><span class="ex">module</span> load pandoc <span class="co">#essential for knitr and rmarkdown</span></a>
<a class="sourceLine" id="cb140-8" data-line-number="8"></a>
<a class="sourceLine" id="cb140-9" data-line-number="9"><span class="va">paramlist=</span><span class="st">&#39;list(nCores =24, gRange = 1:300 )&#39;</span></a>
<a class="sourceLine" id="cb140-10" data-line-number="10"><span class="ex">Rscript</span> -e <span class="st">&#39;knitr::opts_knit$set(progress = TRUE, verbose = TRUE); rmarkdown::render(&quot;/data/uqpdyer/demo.Rmd&quot;, params = &#39;&quot;</span><span class="va">${paramlist}</span><span class="st">&quot;&#39;, output_format = &quot;html_notebook&quot;, output_file = &quot;outfile.html&quot;, output_dir = &quot;/data/uqpdyer&quot;, envir = new.env())&#39;</span></a></code></pre></div>
<p>If you want to generate a collection of rendered Rmd files, you have to
write up a script for each set of parameters.</p>
<p>The other way to generate a set of Rmd files with different parameters,
in parallel, is to copy the file and change the parameters in each file.
Then you can use job arrays by naming the files from 1 to n.</p>
<p>The simplest approach I can think of to run many different Rmd files is
to have a shell script, that calls an R script, that renders an Rmd.
Parameters passed to the shell script go all the way down to the Rmd
file.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1">args =<span class="st"> </span><span class="kw">commandArgs</span>(<span class="dt">trailingOnly =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb141-2" data-line-number="2"></a>
<a class="sourceLine" id="cb141-3" data-line-number="3">knitr<span class="op">::</span>opts_knit<span class="op">$</span><span class="kw">set</span>(<span class="dt">progress =</span> <span class="ot">TRUE</span>, <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb141-4" data-line-number="4"></a>
<a class="sourceLine" id="cb141-5" data-line-number="5">paramlist=<span class="kw">list</span>(<span class="dt">nCores =</span><span class="kw">as.numeric</span>(args[<span class="dv">1</span>]), <span class="dt">gRange =</span> <span class="kw">as.numeric</span>(args[<span class="dv">2</span>])<span class="op">:</span><span class="kw">as.numeric</span>(args[<span class="dv">3</span>]))</a>
<a class="sourceLine" id="cb141-6" data-line-number="6">rmarkdown<span class="op">::</span><span class="kw">render</span>(<span class="st">&quot;/data/uqpdyer/demo.Rmd&quot;</span>, <span class="dt">params =</span> paramlist, <span class="dt">output_format =</span> <span class="st">&quot;html_notebook&quot;</span>,</a>
<a class="sourceLine" id="cb141-7" data-line-number="7">                  <span class="dt">output_file =</span> <span class="st">&quot;outfile.html&quot;</span>, <span class="dt">output_dir =</span> <span class="st">&quot;/data/uqpdyer&quot;</span>, <span class="dt">envir =</span> <span class="kw">new.env</span>())</a></code></pre></div>
</div>
</div>
</div>
<div id="debugging-rmd-files" class="section level3">
<h3><span class="header-section-number">7.2.8</span> Debugging Rmd files</h3>
<p>Debugging regular R isn’t great, but debugging Rmd files non-interactively is even worse.</p>
<p>Here are some tricks:</p>
<div id="cache-on" class="section level4">
<h4><span class="header-section-number">7.2.8.1</span> Cache on</h4>
<p>Turn on caching for your Rmd file.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">cache=</span><span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="load-in-cache-dir" class="section level4">
<h4><span class="header-section-number">7.2.8.2</span> Load in cache dir</h4>
<p>The qwraps2 package on github has a function, <code>lazyload_cache</code>, which will pull in the saved cache so you can interact with it in RStudio.</p>
<p><a href="https://github.com/dewittpe/qwraps2/blob/master/R/lazyload_cache.R" class="uri">https://github.com/dewittpe/qwraps2/blob/master/R/lazyload_cache.R</a></p>
<p>Once you call <code>lazyload_cache()</code> on the cache generated by knitr, your environment has all the variables seen up until a failure point.</p>
</div>
</div>
</div>
<div id="general-hpc-guidance" class="section level2">
<h2><span class="header-section-number">7.3</span> General HPC Guidance</h2>
<div id="getting-results-back" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Getting Results back</h3>
<p>The batch jobs are not interactive. You set them up to run and come back for the results. Usually you save a file to disk.</p>
<p>All printed output goes to a file <code>slurm-&lt;job number&gt;.out</code>.</p>
<p>For example, in SLURM you can change the name with</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb143-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb143-2" data-line-number="2"><span class="co">#SBATCH -o output_file_%A_%a.out #%A is the job number, %a is the array number</span></a>
<a class="sourceLine" id="cb143-3" data-line-number="3"><span class="co">#SBATCH -e error_file.err</span></a></code></pre></div>
</div>
<div id="data.frames" class="section level3">
<h3><span class="header-section-number">7.3.2</span> Data.frames</h3>
<p>If you have R objects you want to see, save them to disk.</p>
<ul>
<li>saveRDS
R binary format, single object, you specify the name when you readRDS</li>
<li>fwrite
data.table csv writer, fast, and gives you a csv</li>
<li>feather
a new binary format backed by Hadley, fast, and compatible with
python</li>
<li>fst
another new binary format, extremely fast and you can read in
subsets of the data.frame</li>
<li>Archivist
puts everything into a database and gives a unique hash to every
object. Good for reproducibility, you can’t mix up objects from
different runs later on because the hash always changes</li>
</ul>
</div>
<div id="plots" class="section level3">
<h3><span class="header-section-number">7.3.3</span> Plots</h3>
<p>Always save plots to disk, unless you are using Rmd files, which will
put the plot into the output html anyway.</p>
<p>Use <code>ggsave()</code> for ggplots, and <code>dev.png()</code>, your plotting code, <code>dev.off()</code> for other kinds of R plots.</p>
<p>It is a good idea to set the width, height and dpi for all your plots.</p>
</div>
<div id="playing-nice" class="section level3">
<h3><span class="header-section-number">7.3.4</span> Playing nice</h3>
<p>The cluster is a shared resource.</p>
<p>Try to be as precise as possible when allocating resources, so others can use what you don’t need.</p>
<p>Be careful with any package that submits jobs for you (<code>Rslurm</code>,<code>future.batchtools</code>). Check the jobs are requesting a reasonable set of resources.</p>
</div>
<div id="job-submission-tips" class="section level3">
<h3><span class="header-section-number">7.3.5</span> Job Submission Tips</h3>
<p>If you have trouble getting access to the resources you want, consider if you can split up your jobs into smaller parts. The queue system (PBSpro and SLURM) will normally favour smaller, shorter jobs. If you request a single job which needs, for example, 24 cores, then you will have a long (days) delay to start, because the HPC needs to find 24 cores on the same node, which may require existing jobs to finish. While your job is queued, other smaller jobs will jump in front of you and get time. If the cores don’t need to talk to each other, consider submitting the job as an array job, with 24 individual runs of 1 core each.</p>
</div>
<div id="what-hpc-should-i-use" class="section level3">
<h3><span class="header-section-number">7.3.6</span> What HPC should I use?</h3>
<p>The MME lab has users across all HPCs (Awoonga-Phil, Flashlite-Isaac, Tinarro-Patrick, Getafix-Patrick). Our staff/students will continue to use the system which works best for our individual needs.</p>
<p>Our experience is that getting time on Getafix is the easiest - apart from the end of session when a lot of undergraduates are completing assignments. However, Getafix is a bit more of a stand-alone cluster, which is run by SMP and does not have fast write access to the UQ Research Data Manager (RDM). The RCC HPC’s all have fast write access to the RDM.</p>
<p>As it is a smaller community of users, the staff in charge of Getafix seem to be more flexible in terms of installing new modules if you request. Because the RCC is responsible for the HPC support for the rest of UQ, they need more rigorous protocols to install new modules but they will do so if asked.</p>
</div>
<div id="parallel-coding-in-r" class="section level3">
<h3><span class="header-section-number">7.3.7</span> Parallel coding in R</h3>
<div id="add-a-section-on-parallelising-in-slurmpbspro" class="section level4">
<h4><span class="header-section-number">7.3.7.1</span> Add a section on parallelising in SLURM/PBSpro</h4>
<p>Include something on Epilogue and Prologue
And pro/cons of parallelising in/outside of R</p>
</div>
<div id="parlapply-parapply-etc." class="section level4">
<h4><span class="header-section-number">7.3.7.2</span> parlapply, par*apply etc.</h4>
<p>The parallel package gives you par* versions of the apply family of functions.</p>
<p>Easy to drop in if you usually use the apply family from base R, you replace any <code>apply</code>, <code>lapply</code>, <code>sapply</code> with <code>parapply</code>, <code>parlapply</code>, <code>parsapply</code>.</p>
</div>
<div id="foreach-and-dopar" class="section level4">
<h4><span class="header-section-number">7.3.7.3</span> foreach and %dopar%</h4>
<p>The <code>foreach</code> package has a few uses.</p>
<p>First, it changes how you use <code>for</code> loops in R. Base R <code>for</code> loops usually work by changing a variable defined outside the loop. <code>foreach</code> is more like an <code>apply</code>, where a result is returned, so <code>foreach</code> works without needing to use side effects.</p>
<p>Second, because <code>foreach</code> can work without side effects, it can run the loop in parallel easily. There are a number of backends you can use, including <code>doParallel</code>, <code>doMPI</code>, <code>doFuture</code>. You can quickly change how parallel works by replacing <code>%do%</code> with <code>%dopar%</code> and changing the registerDo* function at the start of your script.</p>
<p>If you already like using <code>foreach</code> over the apply family, moving to parallel is easy. The main downside is that <code>foreach</code> is not particularly efficient with resources. If you are mostly using the apply family, switching to <code>foreach</code> is much harder.</p>
</div>
<div id="future" class="section level4">
<h4><span class="header-section-number">7.3.7.4</span> <code>future</code></h4>
<p>The <code>future</code> package is built around the idea of a promise. The promise is “Eventually the variable will have a result assigned to it, but not straight away”. You replace <code>&lt;-</code> with <code>%&lt;-%</code> and the line of code becomes a promise, rather than something to do right away.</p>
<p>Generally, you don’t need to change your code much, just add <code>%</code> around your <code>&lt;-</code> at strategic points, but you can gain a lot of flexibility, and there are many backends.</p>
<p><code>future.apply</code> gives you parallel versions of <code>apply</code>. <code>doFuture</code> mixes <code>future</code> and <code>foreach</code>.</p>
<p><code>future.batchtools</code> spawns jobs on the cluster that return the results into your session. <code>future.callr</code> does local parallel calculations in separate R processes. <code>future</code> alone will do local multiprocessor calculations and use multiple nodes.</p>
</div>
<div id="general-coding-habits-for-going-parallel" class="section level4">
<h4><span class="header-section-number">7.3.7.5</span> General Coding habits for going parallel</h4>
<ol style="list-style-type: decimal">
<li>Put things into lists</li>
</ol>
<ul>
<li>It is easy to loop over lists, and you can quickly parallelise the processing of a list.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Don’t do graphics in parallel</li>
</ol>
<ul>
<li>Generally speaking, you can specify ggplot objects in parallel, but if you try to print or save them in parallel, R crashes.</li>
<li>You probably have to work very carefully to open multiple <code>dev.png()</code> for plotting base R plots.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Make functions small</li>
</ol>
<ul>
<li>If you repeat something frequently, put it into a function. You can then put functions into packages. Try to keep functions small, then they are easier to use in parallel. Generally don’t try to work in parallel within a function.</li>
<li>If you want a function to use parallel processing, I strongly recommend you use either <code>future</code> or <code>foreach</code> with <code>%dopar%</code>. By default, they both drop back to sequential processing, but the user can set up parallel processing before calling the function to get speed improvements.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Look for loops, but don’t use R base <code>for</code> loops</li>
</ol>
<ul>
<li>Base R <code>for</code> loops cannot be used in parallel, because they rely on side effects.</li>
</ul>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="how-to-write-well.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="gcm.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
